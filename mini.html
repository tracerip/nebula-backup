<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1"><title>Nebula Portable</title><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"><style>body{margin:0;padding:20px;background:#050505;color:#fff;font-family:sans-serif;overflow-x:hidden}header{display:flex;justify-content:space-between;align-items:center;border-bottom:1px solid #333;padding-bottom:15px;margin-bottom:20px}h1{margin:0;font-size:20px;color:#6366f1}#search{padding:10px;background:#111;border:1px solid #333;color:#fff;border-radius:5px;width:200px}.grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(160px,1fr));gap:15px}.card{background:#111;border:1px solid #222;border-radius:8px;overflow:hidden;cursor:pointer;transition:.2s;text-align:center}.card:hover{transform:translateY(-3px);border-color:#6366f1}.card-img{width:100%;height:100px;object-fit:cover;background:#000}.card-emoji{font-size:40px;line-height:100px;height:100px;background:#151515;display:block}.card-info{padding:10px}.card h3{margin:0;font-size:14px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.card p{font-size:11px;color:#888;margin:5px 0 0}.folder{border-color:#fbbf24}.folder h3{color:#fbbf24}.featured-card{grid-column:1/-1;background:linear-gradient(135deg,#4f46e5 0,#7c3aed 100%);display:flex;align-items:center;text-align:left;padding:20px;border:none}.featured-card:hover{transform:scale(1.01)}.featured-icon{font-size:32px;margin-right:20px;width:50px;text-align:center}.featured-info h3{font-size:20px;margin-bottom:5px;color:#fff}.featured-info p{font-size:13px;color:#e0e7ff;margin:0;white-space:normal}#game-view{position:fixed;top:0;left:0;width:100%;height:100%;background:#000;display:none;z-index:999}iframe{width:100%;height:100%;border:none;background:#000}#game-bar{position:absolute;top:0;left:0;width:100%;height:40px;background:rgba(0,0,0,.8);display:flex;align-items:center;padding:0 20px;box-sizing:border-box;backdrop-filter:blur(5px)}.back-btn{background:#6366f1;color:#fff;border:none;padding:5px 15px;border-radius:4px;cursor:pointer;font-weight:700}.back-btn:hover{background:#4f46e5}#game-title{margin-left:15px;font-weight:700}.folder-back{grid-column:1/-1;background:#222;padding:10px;text-align:center;cursor:pointer;border-radius:5px;margin-bottom:10px;color:#aaa}.folder-back:hover{background:#333;color:#fff}</style></head><body><header><h1>Nebula</h1><input type="text" id="search" placeholder="Search..." onkeyup="filterGames()"></header><div id="status">Loading Library...</div><div id="grid" class="grid"></div><div id="game-view"><div id="game-bar"><button class="back-btn" onclick="closeGame()">EXIT</button><span id="game-title">Game Title</span></div><iframe id="frame" allowfullscreen></iframe></div><script>const REPO="https://cdn.jsdelivr.net/gh/tracerip/nebula-backup@main";let library=[];let featuredItem=null;let currentList=[];(async function(){try{const res=await fetch(REPO+"/assets/games.js");if(!res.ok){throw new Error("games.js not found")}const text=await res.text();const libMatch=text.match(/const\s+library\s*=\s*(\[[\s\S]*?\]);/);const featMatch=text.match(/const\s+featuredItem\s*=\s*({[\s\S]*?});/);if(!libMatch){throw new Error("Library format changed")}library=eval(libMatch[1]);if(featMatch){try{featuredItem=eval("("+featMatch[1]+")")}catch(e){console.warn("Featured item parse failed",e)}}document.getElementById("status").style.display="none";sortLib(library);render(library)}catch(e){document.getElementById("status").innerText="Error loading library: "+e.message;console.error(e)}})();function render(list,isSub){const grid=document.getElementById("grid");grid.innerHTML="";currentList=list;if(!isSub&&list===library&&featuredItem){const featEl=document.createElement("div");featEl.className="card featured-card";featEl.innerHTML="<div class='featured-icon'><i class='"+featuredItem.icon+"'></i></div><div class='featured-info'><h3>"+featuredItem.title+" <i class='fa-solid fa-arrow-right' style='font-size:14px;margin-left:5px;opacity:.7'></i></h3><p>"+featuredItem.description+"</p></div>";featEl.onclick=function(){let url=featuredItem.link;if(url==="/movie"){url=REPO+"/movie.html"}launchRaw(featuredItem.title,url,REPO+"/")};grid.appendChild(featEl)}if(isSub){const back=document.createElement("div");back.className="folder-back";back.innerHTML="<b>â¬… Back to Main Menu</b>";back.onclick=()=>render(library);grid.appendChild(back)}list.forEach(function(item){const el=document.createElement("div");const isGroup=item.type==="group";el.className=isGroup?"card folder":"card";let imgHtml="<span class='card-emoji'>"+(item.icon||"ðŸŽ®")+"</span>";if(item.icon&&/\.(png|jpg|jpeg|gif|webp)$/i.test(item.icon)){const path=isGroup?REPO+"/assets/"+item.icon:REPO+"/games/"+item.id+"/"+item.icon;imgHtml="<img src='"+path+"' class='card-img' loading='lazy' onerror='this.style.display=\"none\"'>"}el.innerHTML=imgHtml+"<div class='card-info'><h3>"+item.title+"</h3><p>"+(isGroup?item.items.length+" Versions":"Click to Play")+"</p></div>";el.onclick=function(){if(isGroup){render(item.items,true)}else{launchRaw(item.title,REPO+"/games/"+item.id+"/index.html",REPO+"/games/"+item.id+"/")}};grid.appendChild(el)})}async function launchRaw(titleStr,fileUrl,baseUrl){const view=document.getElementById("game-view");const frame=document.getElementById("frame");const title=document.getElementById("game-title");title.innerText="Loading "+titleStr+"...";view.style.display="block";try{const response=await fetch(fileUrl);if(!response.ok){throw new Error("File not found")}let html=await response.text();if(html.indexOf("<base")===-1){html=html.replace("<head>","<head><base href=\""+baseUrl+"\">")}const doc=frame.contentWindow.document;doc.open();doc.write(html);doc.close();title.innerText=titleStr}catch(e){title.innerText="Error Loading";frame.contentWindow.document.body.innerHTML="<div style='color:white;font-family:sans-serif;padding:20px'><h2>Error loading content</h2><p>"+e.message+"</p></div>"}}function closeGame(){const view=document.getElementById("game-view");const frame=document.getElementById("frame");view.style.display="none";frame.src="about:blank"}function filterGames(){const term=document.getElementById("search").value.toLowerCase();if(!term){return render(library)}let all=[];(function collect(lst){lst.forEach(i=>i.type==="group"?collect(i.items):all.push(i))})(library);render(all.filter(g=>g.title.toLowerCase().includes(term)))}function sortLib(lst){lst.sort((a,b)=>(a.type==="group")===(b.type==="group")?a.title.localeCompare(b.title):a.type==="group"?-1:1)}</script></body></html>